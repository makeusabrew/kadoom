<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Kadoom!</title>
        <!-- global dependencies -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <!-- client side only code -->
        <script src="/js/bus.js"></script>
        <script src="/js/camera.js"></script>
        <script src="/js/client.js"></script>
        <script src="/js/game.js"></script>
        <script src="/js/surface.js"></script>
        <!-- shared client/server logic -->
        <script src="/js/shared/player.js"></script>
        <script src="/js/shared/world.js"></script>
        <script>
            var onLoad = function() {
                // @todo show loading state
                Client.init();  // this is _local_ initialisation rather than remote
                Client.setCamera(Camera.factory());
                Client.setPlayer(Player.factory());
                Client.setWorld(World.factory());
                Client.setViewport({
                    'buffer':   'viewport',
                    'width':    640,
                    'height':   480 
                });
                Client.connect();

                Game.registerRenderHandler(Client.render);

                Bus.subscribe("client_ready", null, function() {
                    // @todo remove loader, show world
                    Game.tick();
                });
            };
        </script>
    </head>
    <body onload="javascript:onLoad();">
        <header>
            <h1>Kadoom!</h1>
        </header>
        <div>
            The good stuff will happen here!
        </div>
        <canvas id="viewport" style="border:1px solid black;"></canvas>
        <footer>
            by <a href="http://github.com/makeusabrew">makeusabrew</a>
        </footer>
    </body>
</html>
